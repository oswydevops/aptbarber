{% extends "base.html" %}
{% block title %}APT Barber{% endblock %}

{% block content %}
<!-- HERO -->
<section class="hero fade-in">
    <div class="container hero-content">
        <h1 class="hero-title">
            Bienvenido a tu barberia, tu casa<br>
        </h1>
        <p class="hero-subtitle">Estilo  â€¢  PrecisiÃ³n  â€¢  Actitud</p>
        
        <a href="https://wa.me/+5355605133?text=Â¡Hola!%20Quiero%20reservar%20una%20cita%20ðŸ™‚" 
           class="btn-whatsapp hero-btn">
            Reservar Cita por WhatsApp
        </a>
    </div>
</section>

<!-- GALERÃA â€“ SIN REPETICIONES, 100% FUNCIONANDO -->
<section class="gallery-section">
    <div class="container">
        <h2 class="section-title fade-in">Nuestros Trabajos</h2>
        
        <div class="gallery-wrapper">
            <button class="gallery-arrow arrow-left" id="prevBtn">
                <svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M15 18l-6-6 6-6"/>
                </svg>
            </button>

            <button class="gallery-arrow arrow-right" id="nextBtn">
                <svg width="34" height="34" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M9 18l6-6-6-6"/>
                </svg>
            </button>

            <div class="gallery-container">
                <div class="gallery-track" id="galleryTrack">
                    {% set ns = namespace(found=0) %}
                    {% for img in gallery_images %}
                        {% if ns.found < 10 %}
                            <div class="gallery-item">
                                <img src="{{ url_for('static', filename='images/gallery/' ~ img) }}" 
                                     alt="Trabajo APT Barber" loading="lazy">
                            </div>
                            {% set ns.found = ns.found + 1 %}
                        {% endif %}
                    {% endfor %}

                    {% if ns.found == 0 %}
                        <div class="gallery-item text-center text-gray-500 py-32 w-full">
                            <p class="text-2xl">AÃºn no hay trabajos en la galerÃ­a</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- LIGHTBOX (IGUAL QUE ANTES) -->
<div id="lightbox" class="lightbox">
    <span class="lightbox-close">Ã—</span>
    <img class="lightbox-content" id="lightbox-img" alt="">
    <div class="lightbox-nav left">â€¹</div>
    <div class="lightbox-nav right">â€º</div>
    <div class="lightbox-caption" id="lightbox-caption"></div>
</div>

<script>
// SCROLL SUAVE CON FLECHAS
document.getElementById('prevBtn').onclick = () => {
    document.getElementById('galleryTrack').scrollBy({ left: -380, behavior: 'smooth' });
};
document.getElementById('nextBtn').onclick = () => {
    document.getElementById('galleryTrack').scrollBy({ left: 380, behavior: 'smooth' });
};

// LIGHTBOX â€“ FUNCIONA PERFECTO CON LAS NUEVAS FOTOS
document.addEventListener("DOMContentLoaded", function () {
    const imgs = document.querySelectorAll('.gallery-item img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const caption = document.getElementById('lightbox-caption');
    const close = document.querySelector('.lightbox-close');
    let currentIndex = 0;

    imgs.forEach((img, i) => {
        img.onclick = function(e) {
            e.stopPropagation();
            currentIndex = i;
            lightboxImg.src = this.src;
            caption.textContent = this.alt || "APT Barber";
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        };
    });

    close.onclick = () => {
        lightbox.classList.remove('active');
        document.body.style.overflow = '';
    };

    lightbox.onclick = (e) => {
        if (e.target === lightbox) {
            close.click();
        }
    };

    document.querySelector('.lightbox-nav.left').onclick = () => {
        currentIndex = (currentIndex - 1 + imgs.length) % imgs.length;
        lightboxImg.src = imgs[currentIndex].src;
        caption.textContent = imgs[currentIndex].alt;
    };

    document.querySelector('.lightbox-nav.right').onclick = () => {
        currentIndex = (currentIndex + 1) % imgs.length;
        lightboxImg.src = imgs[currentIndex].src;
        caption.textContent = imgs[currentIndex].alt;
    };

    document.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('active')) return;
        if (e.key === 'Escape') close.click();
        if (e.key === 'ArrowLeft') document.querySelector('.lightbox-nav.left').click();
        if (e.key === 'ArrowRight') document.querySelector('.lightbox-nav.right').click();
    });
});
</script>

<style>
/* LIGHTBOX ESTILO ORIGINAL */
.lightbox {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.95);
    align-items:center;
    justify-content:center;
    z-index:9999;
    padding:20px;
}
.lightbox.active { display:flex; }
.lightbox-content { max-width:90%; max-height:85vh; border-radius:20px; }
.lightbox-close {
    position:absolute;
    top:20px;
    right:30px;
    font-size:50px;
    color:white;
    cursor:pointer;
    font-weight:300;
}
.lightbox-nav {
    position:absolute;
    top:50%;
    font-size:60px;
    color:white;
    cursor:pointer;
    user-select:none;
    padding:0 20px;
}
.lightbox-nav.left { left:20px; }
.lightbox-nav.right { right:20px; }
.lightbox-caption {
    position:absolute;
    bottom:30px;
    color:white;
    font-size:1.2rem;
    background:rgba(0,0,0,0.5);
    padding:10px 20px;
    border-radius:12px;
}

/* Responsive lightbox */
@media (max-width: 768px) {
    .lightbox-nav { font-size: 50px; padding: 0 15px; }
    .lightbox-nav.left { left: 15px; }
    .lightbox-nav.right { right: 15px; }
    .lightbox-close { top: 15px; right: 20px; font-size: 40px; }
    .lightbox-caption { bottom: 20px; font-size: 1rem; padding: 8px 15px; }
}

@media (max-width: 480px) {
    .lightbox-nav { font-size: 40px; }
    .lightbox-close { font-size: 35px; }
}
</style>

<!-- FOOTER 2026 -->
<footer id="contacto" class="footer-2026">
    <div class="container footer-grid">

        <!-- BLOQUE 1: CONTACTO -->
        <div class="footer-block">
            <h3 class="footer-title">Contacto</h3>

            <!-- TelÃ©fono con icono -->
            <p class="contact-line">
                <img src="/static/images/icons/telefono.svg" alt="TelÃ©fono" class="contact-icon">
                <a href="tel:+5355605133">+53 5560 5133</a>
            </p>

            <!-- UbicaciÃ³n con icono + enlace a Google Maps -->
            <p class="contact-line">
                <img src="/static/images/icons/ubicacion.svg" alt="UbicaciÃ³n" class="contact-icon">
                <a href="https://maps.app.goo.gl/NFcngDXYxjaQh3oS6" target="_blank">
                   Calle 2da # 5 E/Calle A y Calle B, Reparto Primero de Mayo, Nuevitas
                </a>
            </p>
        </div>

        <!-- BLOQUE 2: MÃ‰TODOS DE PAGO -->
        <div class="footer-block">
            <h3 class="footer-title">MÃ©todos de Pago</h3>

            <div class="payment-grid-footer">
                <div class="pay-item-footer">
                    <img src="/static/images/payments/efectivo-icon.svg" alt="Efectivo"><p>Efectivo</p>
                </div>
                <div class="pay-item-footer">
                    <img src="/static/images/payments/transfermovil-logo.svg" alt="TransfermÃ³vil"><p>TransfermÃ³vil</p>
                </div>
                <div class="pay-item-footer">
                    <img src="/static/images/payments/enzona-logo.svg" alt="Enzona"><p>Enzona</p>
                </div>
                <div class="pay-item-footer">
                    <img src="/static/images/payments/bitcoin-logo.svg" alt="Cripto"><p>Criptomonedas</p>
                </div>
            </div>
        </div>

        <!-- BLOQUE 3: HORARIOS -->
        <div class="footer-block">
            <h3 class="footer-title">Horarios</h3>
            <p><strong>Lunes â€“ Viernes:</strong> 9:00 AM â€“ 7:00 PM</p>
            <p><strong>SÃ¡bado:</strong> 9:00 AM â€“ 5:00 PM</p>
            <p><strong>Domingo:</strong> Cerrado</p>
        </div>

    </div>

    <!-- COPYRIGHT - DEBAJO DE TODO Y CENTRADO -->
    <div class="footer-bottom">
        <p>Â© COPYRIGHT 2026 APT BARBER â€¢ Todos los derechos reservados</p>
        <p class="footer-phrase">"Hecho con disciplina, huevos y actitud..."</p>
    </div>
</footer>

{% endblock %}